<!DOCTYPE html>
<html>
<head>
<script>

//
// bearing 
//

function radians(n) {
  return n * (Math.PI / 180);
}
function degrees(n) {
  return n * (180 / Math.PI);
}

function getBearing(startLat,startLong,endLat,endLong){
  startLat = radians(startLat);
  startLong = radians(startLong);
  endLat = radians(endLat);
  endLong = radians(endLong);

  var dLong = endLong - startLong;

  var dPhi = Math.log(Math.tan(endLat/2.0+Math.PI/4.0)/Math.tan(startLat/2.0+Math.PI/4.0));
  if (Math.abs(dLong) > Math.PI){
    if (dLong > 0.0)
       dLong = -(2.0 * Math.PI - dLong);
    else
       dLong = (2.0 * Math.PI + dLong);
  }

  return (degrees(Math.atan2(dLong, dPhi)) + 360.0) % 360.0;
}

//
// distance
//

function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {
  var R = 6371; // Radius of the earth in km
  var dLat = deg2rad(lat2-lat1);  // deg2rad below
  var dLon = deg2rad(lon2-lon1); 
  var a = 
    Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
    Math.sin(dLon/2) * Math.sin(dLon/2)
    ; 
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
  var d = R * c; // Distance in km
  return d;
}

function deg2rad(deg) {
  return deg * (Math.PI/180)
}


// Bearing: Highbury and Islington to Arsenal Emirate's Stadium
alert(getBearing(51.54647680000001, -0.10431170000003931, 51.5548885, -0.10843799999997827));

// Bearing: Sydney Opera House to Mrs Maquarie's Chair
alert(getBearing(-33.858667, 151.214028, -33.859467, 151.222203));

// Distance: Highbury and Islington to Arsenal Emirate's Stadium
alert(getDistanceFromLatLonInKm(51.54647680000001, -0.10431170000003931, 51.5548885, -0.10843799999997827));

// Distance: Sydney Opera House to Mrs Maquarie's Chair
alert(getDistanceFromLatLonInKm(-33.858667, 151.214028, -33.859467, 151.222203));


</script>
</head>
<body>

<p>Click the button to get your coordinates.</p>

<button onclick="getLocation()">Try It</button>

<p id="demo"></p>


</body>
</html>
